#
# XG-040G-MD 小楼版配置
# 功能: mwan3 + smartdns + zerotier + homeproxy + passwall + ksmbd + vsftpd-alt + transmission + upnp
# 更新: 2026-02-23
#

# 目标平台
CONFIG_TARGET_airoha=y
CONFIG_TARGET_airoha_an7581=y
CONFIG_TARGET_airoha_an7581_DEVICE_bell_xg-040g-md=y
CONFIG_TARGET_ARCH_PACKAGES="aarch64_cortex-a53"
CONFIG_PACKAGE_airoha-en7581-npu-firmware=y

# ===== 基础系统 =====
CONFIG_PACKAGE_base-files=y
CONFIG_PACKAGE_block-mount=y
CONFIG_PACKAGE_dnsmasq-full=y
CONFIG_PACKAGE_dropbear=y
CONFIG_PACKAGE_fstools=y
CONFIG_PACKAGE_libc=y
CONFIG_PACKAGE_libgcc=y
CONFIG_PACKAGE_libustream-openssl=y
CONFIG_PACKAGE_logd=y
CONFIG_PACKAGE_mtd=y
CONFIG_PACKAGE_netifd=y
CONFIG_PACKAGE_odhcp6c=y
CONFIG_PACKAGE_odhcpd-ipv6only=y
CONFIG_PACKAGE_ppp=y
CONFIG_PACKAGE_ppp-mod-pppoe=y
CONFIG_PACKAGE_procd-ujail=y
CONFIG_PACKAGE_uci=y
CONFIG_PACKAGE_uclient-fetch=y
CONFIG_PACKAGE_urandom-seed=y
CONFIG_PACKAGE_urngd=y

# 固件格式
CONFIG_TARGET_ROOTFS_SQUASHFS=y
CONFIG_TARGET_SQUASHFS_BLOCK_SIZE=256

# ===== 内核模块 - USB支持 =====
CONFIG_PACKAGE_kmod-usb-core=y
CONFIG_PACKAGE_kmod-usb-ohci=y
CONFIG_PACKAGE_kmod-usb-uhci=y
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_kmod-usb-storage-extras=y
CONFIG_PACKAGE_kmod-usb2=y
CONFIG_PACKAGE_kmod-usb3=y
CONFIG_PACKAGE_kmod-scsi-core=y
CONFIG_PACKAGE_kmod-fs-vfat=y
CONFIG_PACKAGE_kmod-fs-exfat=y
CONFIG_PACKAGE_kmod-fs-ntfs3=y
CONFIG_PACKAGE_kmod-fs-ext4=y
CONFIG_PACKAGE_kmod-nls-base=y
CONFIG_PACKAGE_kmod-nls-cp437=y
CONFIG_PACKAGE_kmod-nls-iso8859-1=y
CONFIG_PACKAGE_kmod-nls-utf8=y

# ===== 内核模块 - 网络基础 =====
CONFIG_PACKAGE_kmod-ipt-conntrack=y
CONFIG_PACKAGE_kmod-ipt-conntrack-extra=y
CONFIG_PACKAGE_kmod-ipt-core=y
CONFIG_PACKAGE_kmod-ipt-ipopt=y
CONFIG_PACKAGE_kmod-ipt-ipset=y
CONFIG_PACKAGE_kmod-ipt-nat=y
CONFIG_PACKAGE_kmod-ipt-nat-extra=y
CONFIG_PACKAGE_kmod-ipt-tproxy=y
CONFIG_PACKAGE_kmod-nf-conntrack=y
CONFIG_PACKAGE_kmod-nf-conntrack6=y
CONFIG_PACKAGE_kmod-nf-flow=y
CONFIG_PACKAGE_kmod-nf-ipt=y
CONFIG_PACKAGE_kmod-nf-ipt6=y
CONFIG_PACKAGE_kmod-nf-nat=y
CONFIG_PACKAGE_kmod-nf-nathelper=y
CONFIG_PACKAGE_kmod-nfnetlink=y
CONFIG_PACKAGE_kmod-tun=y
CONFIG_PACKAGE_kmod-macvlan=y

# ===== 网络加速 =====
CONFIG_PACKAGE_kmod-fast-classifier=y
CONFIG_PACKAGE_kmod-shortcut-fe=y
CONFIG_PACKAGE_kmod-shortcut-fe-cm=y

# ===== 防火墙（老版 iptables）=====
# CONFIG_PACKAGE_firewall4 is not set
# CONFIG_PACKAGE_nftables is not set
# CONFIG_PACKAGE_luci-app-firewall4 is not set

CONFIG_PACKAGE_firewall=y
CONFIG_PACKAGE_iptables=y
CONFIG_PACKAGE_iptables-mod-conntrack-extra=y
CONFIG_PACKAGE_iptables-mod-ipopt=y
CONFIG_PACKAGE_iptables-mod-nat-extra=y
CONFIG_PACKAGE_iptables-mod-tproxy=y
CONFIG_PACKAGE_iptables-mod-iprange=y
CONFIG_PACKAGE_iptables-mod-filter=y
CONFIG_PACKAGE_ip6tables=y
CONFIG_PACKAGE_ip6tables-extra=y
CONFIG_PACKAGE_luci-app-firewall=y

# ===== LuCI基础 =====
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-mod-admin-full=y
CONFIG_PACKAGE_luci-mod-network=y
CONFIG_PACKAGE_luci-mod-status=y
CONFIG_PACKAGE_luci-mod-system=y
CONFIG_PACKAGE_luci-proto-ipv6=y
CONFIG_PACKAGE_luci-proto-ppp=y
CONFIG_LUCI_LANG_zh_Hans=y

# ===== 美化主题（保留argon，去掉kucat）=====
CONFIG_PACKAGE_luci-theme-argon=y
CONFIG_PACKAGE_luci-app-advancedplus=y
CONFIG_PACKAGE_luci-i18n-advancedplus-zh-cn=y
# CONFIG_PACKAGE_luci-theme-kucat is not set

# ===== 网络核心功能 =====
CONFIG_PACKAGE_luci-app-mwan3=y
CONFIG_PACKAGE_mwan3=y
CONFIG_PACKAGE_ip-full=y
CONFIG_PACKAGE_luci-app-smartdns=y
CONFIG_PACKAGE_smartdns=y
CONFIG_PACKAGE_luci-app-zerotier=y
CONFIG_PACKAGE_zerotier=y
CONFIG_PACKAGE_luci-app-homeproxy=y
CONFIG_PACKAGE_sing-box=y
CONFIG_PACKAGE_v2ray-geodata=y
CONFIG_PACKAGE_luci-app-watchcat=y
CONFIG_PACKAGE_luci-app-cpu-status=y
CONFIG_PACKAGE_cpufreq=y

# ===== PassWall（与homeproxy共存）=====
# 基础依赖
CONFIG_PACKAGE_luci-app-passwall=y
CONFIG_PACKAGE_luci-i18n-passwall-zh-cn=y
CONFIG_PACKAGE_passwall=y
CONFIG_PACKAGE_passwall_Transparent_Proxy=y
CONFIG_PACKAGE_passwall_Shunt=y
CONFIG_PACKAGE_passwall_Auto_Switch=y

# PassWall 核心组件（选择常用的，避免冲突）
CONFIG_PACKAGE_xray-core=y
CONFIG_PACKAGE_xray-plugin=y
CONFIG_PACKAGE_v2ray-core=y
CONFIG_PACKAGE_v2ray-plugin=y
CONFIG_PACKAGE_hysteria=y
CONFIG_PACKAGE_trojan=y
CONFIG_PACKAGE_trojan-plus=y
CONFIG_PACKAGE_naiveproxy=y
CONFIG_PACKAGE_dns2socks=y
CONFIG_PACKAGE_redsocks2=y
CONFIG_PACKAGE_ipt2socks=y
CONFIG_PACKAGE_microsocks=y

# ===== UPnP =====
# CONFIG_PACKAGE_upnpd is not set
CONFIG_PACKAGE_miniupnpd=y
CONFIG_PACKAGE_miniupnpd-iptables=y
CONFIG_PACKAGE_luci-app-upnp=y
CONFIG_PACKAGE_luci-i18n-upnp-zh-cn=y
# CONFIG_PACKAGE_miniupnpd-igd2 is not set
# CONFIG_PACKAGE_miniupnpd-natpmp is not set

# ===== 文件共享（ksmbd + vsftpd-alt）=====
CONFIG_PACKAGE_ksmbd-server=y
CONFIG_PACKAGE_kmod-fs-ksmbd=y
CONFIG_PACKAGE_luci-app-ksmbd=y
CONFIG_PACKAGE_luci-i18n-ksmbd-zh-cn=y
CONFIG_PACKAGE_ksmbd-utils=y

# CONFIG_PACKAGE_vsftpd is not set
CONFIG_PACKAGE_vsftpd-alt=y
CONFIG_PACKAGE_luci-app-vsftpd-alt=y
CONFIG_PACKAGE_luci-i18n-vsftpd-alt-zh-cn=y
CONFIG_VSFTPD_USE_UCI=y
CONFIG_VSFTPD_SSL=y

# ===== 下载服务（Transmission）=====
CONFIG_PACKAGE_transmission-daemon-openssl=y
CONFIG_PACKAGE_transmission-web-control=y
CONFIG_PACKAGE_luci-app-transmission=y
CONFIG_PACKAGE_luci-i18n-transmission-zh-cn=y
# CONFIG_PACKAGE_transmission-web is not set

# ===== 磁盘工具 =====
CONFIG_PACKAGE_block-mount=y
CONFIG_PACKAGE_block-hotplug=y
CONFIG_PACKAGE_blkid=y
CONFIG_PACKAGE_lsblk=y
CONFIG_PACKAGE_usbutils=y
CONFIG_PACKAGE_fdisk=y
CONFIG_PACKAGE_e2fsprogs=y
CONFIG_PACKAGE_dosfstools=y
CONFIG_PACKAGE_ntfs-3g=y

# ===== 运维工具 =====
CONFIG_PACKAGE_luci-app-ttyd=y
CONFIG_PACKAGE_ttyd=y
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_nano=y
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_tcpdump=y
CONFIG_PACKAGE_iperf3=y
CONFIG_PACKAGE_openssh-sftp-server=y
CONFIG_PACKAGE_lm-sensors=y
CONFIG_PACKAGE_luci-app-nlbwmon=y
CONFIG_PACKAGE_nlbwmon=y
CONFIG_PACKAGE_luci-app-commands=y
CONFIG_PACKAGE_luci-app-cron=y
CONFIG_PACKAGE_speedtest-netperf=y
CONFIG_PACKAGE_mtr=y

# ===== 内存优化 =====
CONFIG_PACKAGE_zram-swap=y
CONFIG_PACKAGE_luci-app-zram-swap=y

# ===== 编译优化 =====
CONFIG_DEVEL=y
CONFIG_CCACHE=y
CONFIG_USE_MOLD=y
CONFIG_USE_SSTRIP=y
CONFIG_KERNEL_DEBUG_INFO=n
CONFIG_KERNEL_DEBUG_FS=n
CONFIG_KERNEL_KALLSYMS=n
